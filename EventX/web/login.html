<!--
    user Login and SignUp page

    login-> Login.jsp
    signUp->Sign_up.jsp

-->

<!DOCTYPE html>
<html >
<head>
  <meta charset="UTF-8">
  <title>Sign-Up/Login Form</title>
  <link href='http://fonts.googleapis.com/css?family=Titillium+Web:400,300,600' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css">

  
   <link rel="stylesheet" href="css/style1.css">

  
</head>

<body>
  <div class="form">
      
      <ul class="tab-group">
        <li class="tab active"><a href="#signup">Sign Up</a></li>
        <li class="tab"><a href="#login">Log In</a></li>
      </ul>
      
      <div class="tab-content">
        <div id="signup">   
          <h1>Sign Up for Free</h1>
          
          <form action="SignUp.jsp" method="post" enctype="multipart/form-data" id="login2">
          
          <div class="top-row">
            <div class="field-wrap">
              <label>
                First Name<span class="req">*</span>
              </label>
              <input type="text" name="ufname" id="ufname" required autocomplete="off" autofocus/>
            </div>
        
            <div class="field-wrap">
              <label>
                Last Name<span class="req">*</span>
              </label>
              <input type="text" name="ulname" id="ulname" autocomplete="off"/>
            </div>
          </div>
          
          <div class="field-wrap">
            <label>
              Date of birth (DD/MM/YYYY)<span class="req">*</span>
            </label>
            <input type="text" name="udob" id="udob" required autocomplete="off"/>
          </div>
          
          <div class="field-wrap">
            <label>
              Phone number<span class="req">*</span>
            </label>
            <input type="tel" maxlength="12" name="uphone" id="uphone" required autocomplete="off"/>
          </div>
          
          <div class="field-wrap">
            <label>
              Email Address<span class="req">*</span>
            </label>
            <input type="email" name="uemail" id="uemail2" required autocomplete="off"/>
          </div>
         
          <div class="field-wrap">
            <label>
              Set A Password<span class="req">*</span>
            </label>
            <input type="password" name="upass" id="upass2" required autocomplete="off"/>
          </div>
          <p><a><font size="5" id="error2"></a></font></p>
          <input type="submit" class="button button-block" id="submit2" value="Sign Up">
          
          </form>

        </div>
        
        
        <div id="login">   
          <h1>Welcome Back!</h1>
          
          <form action="index.jsp" id="login1" method="POST">
          
            <div class="field-wrap">
            <label>
              Email Address<span class="req">*</span>
            </label>
            <input type="email" name="uemail" id="uemail" required/>
            
        </div>
          
          <div class="field-wrap">
            <label>
              Password<span class="req">*</span>
            </label>
            <input type="password" name="upass" id="upass" required/>
          </div>
          <p><a><font size="5" id="error"></font></a></p>
          <p class="forgot"><a href="#">Forgot Password?</a></p>
          <input type="submit" class="button button-block" value="Log In"/>
          
          </form>
          
        </div>
        
      </div><!-- tab-content -->
      
</div> <!-- /form -->
  <script src='http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>

    <script src="js/index.js"></script>
    <script>
        
        $(document).ready(function(){
       
        //User Login validation........................................................
            
            $("#login1").submit(function(event){
            event.preventDefault();   
            var xhttp,uemail,upass;        
            uemail=$("input#uemail").val();
            upass=$("input#upass").val();
            
            
                        
            if(window.XMLHttpRequest){
                    xhttp=new XMLHttpRequest();
                }
                else{
                    xhttp=new ActiveXObject("Microsoft.XMLHTTP");
                }
                xhttp.onreadystatechange=function(){
                    
                    if(this.readyState==4 && this.status==200){
                        
                        var temp=JSON.parse(this.responseText);
                        
                        
                        if(temp.valid===true){
                            window.location.href='index.jsp';
                        }
                        else{
                            $("#error").text("Invalid Email ID or Password");
                            evn.preventDefault();
                        }
                    }
                };
                
                xhttp.open("POST","loginchk",true);
                xhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
                xhttp.send("uemail="+uemail+"&upass="+upass);
            });
            
            
    //User registration validation...............................................
        $("#login2").submit(function(event){
            event.preventDefault();   
            var xhttp,uemail;        
            var ufname=$("input#ufname").val();
            var ulname=$("input#ulname").val();
            var udob=$("input#dob").val();
            var uphone=$("input#uphone").val();
            var upass=$("input#upass2").val();
            uemail=$("input#uemail2").val();
            
            var str="ufname="+ufname+"&ulname="+ulname+"&udob="+udob+"&uphone="+uphone+"&uemail="+uemail+"&upass="+upass;
            
                        
            if(window.XMLHttpRequest){
                    xhttp=new XMLHttpRequest();
                }
                else{
                    xhttp=new ActiveXObject("Microsoft.XMLHTTP");
                }
                xhttp.onreadystatechange=function(){
                    
                    if(this.readyState==4 && this.status==200){
                        
                        var temp=JSON.parse(this.responseText);
                        
                        
                        if(temp.valid===true){
                            window.location.href='index.jsp';
                        }
                        else{
                            $("#error2").text("Email ID is already registered");
                            }
                    }
                };
                
                xhttp.open("POST","signup",true);
                xhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
                xhttp.send(str);
            });
            
            
            
        
    });
            
            
        
        
        
    </script>

</body>
</html>
